# MDRO 患者分布地图

这是一个基于 Leaflet 的交互式地图应用，用于展示多重耐药菌（MDRO）患者的空间分布情况。

## 📊 数据概览

- **总患者数**: 454例
- **菌种分布**:
  - ESBLE: 404例 (89.0%)
  - MRSA: 40例 (8.8%)
  - CRO: 10例 (2.2%)
- **地理范围**: 覆盖广东省及周边地区

## 🚀 快速开始

### 1. 数据处理
```bash
# 运行数据处理器
python data_processor.py
```

### 2. 启动地图应用
```bash
# 启动本地服务器
python -m http.server 8000

# 在浏览器中访问
http://localhost:8000
```

## 🎨 功能特性

### ✅ 已实现功能

1. **患者点图展示**
   - 不同菌种用不同颜色表示
     - ESBLE: 红色 (#e74c3c)
     - MRSA: 蓝色 (#3498db)
     - CRO: 橙色 (#f39c12)
   - 点击弹出患者ID和菌种信息

2. **区域热力图展示**
   - 基于患者位置和密度生成连续热力分布
   - 使用高斯核函数计算影响范围
   - 颜色渐变：浅黄→橙→红（低→高密度）

3. **图层控制功能**
   - 患者点图图层开关
   - 热力图图层开关
   - 菌种筛选（全部/ESBLE/MRSA/CRO）

4. **交互功能**
   - 地图缩放、平移
   - 点击患者点查看详细信息
   - 实时统计信息显示

5. **图例和统计**
   - 右下角图例说明
   - 右上角实时统计面板
   - 显示总患者数、当前显示数、主要菌种、热力强度

## 🗺️ 地图配置

- **初始中心**: 珠海市中心 [22.2514, 113.5674]
- **初始缩放**: 11级
- **底图**: CartoDB Light（简洁专业）

## 📁 文件结构

```
MDRO_Map/
├── data/
│   ├── mdro_patients.json        # 患者数据（GeoJSON格式）
│   ├── heatmap_data.json         # 热力图数据
│   └── data_stats.json           # 统计信息
├── data_processor.py             # 数据处理器
├── index.html                    # 主页面
└── README_MDRO_Map.md           # 说明文档
```

## 🔧 技术栈

- **地图引擎**: Leaflet.js
- **热力图**: Leaflet.heat
- **数据处理**: Python + pandas
- **数据格式**: GeoJSON

## 📈 数据统计

### 菌种分布
- **ESBLE** (耐超广谱β-内酰胺酶肠杆菌): 404例
- **MRSA** (耐甲氧西林金黄色葡萄球菌): 40例  
- **CRO** (耐碳青霉烯类菌): 10例

### 地理分布
- **纬度范围**: 20.0052° - 24.8285°
- **经度范围**: 110.3517° - 116.5195°
- **主要覆盖**: 广东省及周边地区

## 🎯 使用说明

1. **查看患者分布**: 默认显示所有患者点图
2. **筛选菌种**: 使用左上角下拉菜单筛选特定菌种
3. **切换图层**: 可以独立开关患者点图和热力图
4. **查看详情**: 点击患者点查看患者ID和菌种信息
5. **分析热力**: 热力图显示患者密度分布

## 🔒 隐私保护

- 已删除所有患者个人信息
- 仅保留患者ID、地理坐标和菌种类型
- 符合医疗数据隐私保护要求

## 📞 技术支持

如有问题或建议，请联系开发团队。

---

**版本**: 1.0.0  
**更新日期**: 2024年12月  
**数据来源**: MDRO.xlsx
